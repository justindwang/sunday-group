(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{4210:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(5155),l=r(2115),a=r(5863),n=r(5626);function i(e){let{roomId:t,participantId:r}=e,{participants:i,groups:d,isGroupsFormed:o}=(0,a.n)(),[c,u]=(0,l.useState)(void 0),[m,g]=(0,l.useState)(void 0);return((0,l.useEffect)(()=>{let e=i.find(e=>e.id===r);u(e),e&&e.groupId&&d?g(d.find(t=>t.id===e.groupId)):g(void 0)},[i,d,r]),c)?(0,s.jsxs)("div",{className:"min-h-screen p-6",children:[(0,s.jsxs)("header",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Sunday Group"}),(0,s.jsxs)("p",{className:"text-lg",children:["Welcome, ",c.name,"!"]})]}),(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:o?m?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Your Group"}),(0,s.jsx)("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:m.name})]}),(0,s.jsx)(n.A,{groups:[m],highlightGroupId:m.id})]}):(0,s.jsxs)("div",{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Group Assignment Pending"}),(0,s.jsx)("p",{children:"You haven't been assigned to a group yet. Please wait..."})]}):(0,s.jsxs)("div",{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Waiting for groups to be formed"}),(0,s.jsx)("p",{className:"mb-6",children:"The host will form groups soon. Please wait..."}),(0,s.jsxs)("div",{className:"animate-pulse flex space-x-4 justify-center",children:[(0,s.jsx)("div",{className:"rounded-full bg-blue-400 h-3 w-3"}),(0,s.jsx)("div",{className:"rounded-full bg-blue-400 h-3 w-3"}),(0,s.jsx)("div",{className:"rounded-full bg-blue-400 h-3 w-3"})]})]})})]}):(0,s.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-6",children:(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 text-center",children:"Participant not found. Please try joining again."})})}},5626:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155);function l(e){let{groups:t,highlightGroupId:r}=e;return t&&0!==t.length?(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-center",children:"Groups"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,s.jsxs)("div",{className:"\n              bg-white dark:bg-gray-800 \n              rounded-lg shadow-md overflow-hidden\n              border-t-4 border-blue-500\n              ".concat(r===e.id?"ring-2 ring-blue-500 ring-offset-2":"","\n            "),children:[(0,s.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900",children:(0,s.jsx)("h3",{className:"text-xl font-bold text-center",children:e.name})}),(0,s.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.participants.map(e=>(0,s.jsxs)("li",{className:"\n                    p-4 flex items-center justify-between\n                    ".concat(e.isWillingToLead?"bg-blue-50 dark:bg-blue-900/30":"","\n                  "),children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),e.isWillingToLead&&(0,s.jsx)("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"Leader"})]},e.id))})]},e.id))})]}):(0,s.jsx)("div",{className:"text-center p-8",children:(0,s.jsx)("p",{className:"text-lg",children:"No groups have been formed yet."})})}r(2115)},5863:(e,t,r)=>{"use strict";r.d(t,{RoomProvider:()=>i,n:()=>d});var s=r(5155),l=r(2115);let a=(0,l.createContext)(void 0),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return t;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse JSON from localStorage:",e),t}};function i(e){let{children:t}=e,[r]=(0,l.useState)("sunday-group"),[i,d]=(0,l.useState)(()=>n(localStorage.getItem("participants"),[])),[o,c]=(0,l.useState)(()=>n(localStorage.getItem("groups"),null)),[u,m]=(0,l.useState)(()=>"true"===localStorage.getItem("isGroupsFormed"));(0,l.useEffect)(()=>{localStorage.setItem("roomId",r),localStorage.setItem("participants",JSON.stringify(i)),localStorage.setItem("groups",o?JSON.stringify(o):""),localStorage.setItem("isGroupsFormed",u.toString())},[r,i,o,u]);let g=(e,t)=>{let r={id:Math.random().toString(36).substring(2,9),name:e,isWillingToLead:t};return d(e=>[...e,r]),r};return(0,s.jsx)(a.Provider,{value:{roomId:r,participants:i,groups:o,isGroupsFormed:u,addParticipant:g,addParticipantManually:(e,t)=>{g(e,t)},removeParticipant:e=>{d(t=>t.filter(t=>t.id!==e))},formGroups:()=>{let e=function(e){if(0===e.length)return[];let t=e.filter(e=>e.isWillingToLead),r=e.length,s=Math.floor(r/4),l=Math.ceil(r/6);if(t.length<l)return null;let a=Math.min(s,t.length);a=Math.max(a,l);let n=[...e].sort(()=>Math.random()-.5),i=n.filter(e=>e.isWillingToLead),d=n.filter(e=>!e.isWillingToLead),o=[];for(let e=0;e<a;e++)e<i.length&&o.push({id:"group-".concat(e+1),name:"Group ".concat(e+1),participants:[i[e]],hasLeader:!0});for(let e=a;e<i.length;e++)o[e%a].participants.push(i[e]);for(let e=0;e<d.length;e++){let t=o.map((e,t)=>({index:t,count:e.participants.length})).sort((e,t)=>e.count-t.count)[0].index;o[t].participants.push(d[e])}return o.forEach(e=>{e.participants.forEach(t=>{t.groupId=e.id})}),o}(i);return null!==e&&(c(e),m(!0),!0)},resetGroups:()=>{c(null),m(!1),d(e=>e.map(e=>({...e,groupId:void 0})))},resetRoom:()=>{d([]),c(null),m(!1)}},children:t})}function d(){let e=(0,l.useContext)(a);if(void 0===e)throw Error("useRoom must be used within a RoomProvider");return e}},8607:(e,t,r)=>{Promise.resolve().then(r.bind(r,4210))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(8607)),_N_E=e.O()}]);