(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3871:(e,t,l)=>{Promise.resolve().then(l.bind(l,7571))},5626:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});var s=l(5155);function r(e){let{groups:t,highlightGroupId:l}=e;return t&&0!==t.length?(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-center",children:"Groups"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,s.jsxs)("div",{className:"\n              bg-white dark:bg-gray-800 \n              rounded-lg shadow-md overflow-hidden\n              border-t-4 border-blue-500\n              ".concat(l===e.id?"ring-2 ring-blue-500 ring-offset-2":"","\n            "),children:[(0,s.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900",children:(0,s.jsx)("h3",{className:"text-xl font-bold text-center",children:e.name})}),(0,s.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.participants.map(e=>(0,s.jsxs)("li",{className:"\n                    p-4 flex items-center justify-between\n                    ".concat(e.isWillingToLead?"bg-blue-50 dark:bg-blue-900/30":"","\n                  "),children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),e.isWillingToLead&&(0,s.jsx)("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"Leader"})]},e.id))})]},e.id))})]}):(0,s.jsx)("div",{className:"text-center p-8",children:(0,s.jsx)("p",{className:"text-lg",children:"No groups have been formed yet."})})}l(2115)},5863:(e,t,l)=>{"use strict";l.d(t,{RoomProvider:()=>i,n:()=>d});var s=l(5155),r=l(2115);let a=(0,r.createContext)(void 0),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return t;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse JSON from localStorage:",e),t}};function i(e){let{children:t}=e,[l]=(0,r.useState)("sunday-group"),[i,d]=(0,r.useState)(()=>n(localStorage.getItem("participants"),[])),[o,c]=(0,r.useState)(()=>n(localStorage.getItem("groups"),null)),[u,m]=(0,r.useState)(()=>"true"===localStorage.getItem("isGroupsFormed"));(0,r.useEffect)(()=>{localStorage.setItem("roomId",l),localStorage.setItem("participants",JSON.stringify(i)),localStorage.setItem("groups",o?JSON.stringify(o):""),localStorage.setItem("isGroupsFormed",u.toString())},[l,i,o,u]);let g=(e,t)=>{let l={id:Math.random().toString(36).substring(2,9),name:e,isWillingToLead:t};return d(e=>[...e,l]),l};return(0,s.jsx)(a.Provider,{value:{roomId:l,participants:i,groups:o,isGroupsFormed:u,addParticipant:g,addParticipantManually:(e,t)=>{g(e,t)},removeParticipant:e=>{d(t=>t.filter(t=>t.id!==e))},formGroups:()=>{let e=function(e){if(0===e.length)return[];let t=e.filter(e=>e.isWillingToLead),l=e.length,s=Math.floor(l/4),r=Math.ceil(l/6);if(t.length<r)return null;let a=Math.min(s,t.length);a=Math.max(a,r);let n=[...e].sort(()=>Math.random()-.5),i=n.filter(e=>e.isWillingToLead),d=n.filter(e=>!e.isWillingToLead),o=[];for(let e=0;e<a;e++)e<i.length&&o.push({id:"group-".concat(e+1),name:"Group ".concat(e+1),participants:[i[e]],hasLeader:!0});for(let e=a;e<i.length;e++)o[e%a].participants.push(i[e]);for(let e=0;e<d.length;e++){let t=o.map((e,t)=>({index:t,count:e.participants.length})).sort((e,t)=>e.count-t.count)[0].index;o[t].participants.push(d[e])}return o.forEach(e=>{e.participants.forEach(t=>{t.groupId=e.id})}),o}(i);return null!==e&&(c(e),m(!0),!0)},resetGroups:()=>{c(null),m(!1),d(e=>e.map(e=>({...e,groupId:void 0})))},resetRoom:()=>{d([]),c(null),m(!1)}},children:t})}function d(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useRoom must be used within a RoomProvider");return e}},7571:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>u});var s=l(5155),r=l(2115),a=l(1857);function n(e){let{value:t,size:l=256}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:(0,s.jsx)(a.h,{value:t,size:l,bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!1})}),(0,s.jsx)("p",{className:"mt-4 text-center text-sm",children:"Scan to join the group"})]})}function i(e){let{participants:t}=e,[l,a]=(0,r.useState)([]);return((0,r.useEffect)(()=>{let e=t.map(e=>e.id),s=t.filter(e=>!l.includes(e.id));s.length>0?a(e=>[...e,...s.map(e=>e.id)]):e.length<l.length&&a(t=>t.filter(t=>e.includes(t)))},[t,l]),0===t.length)?(0,s.jsx)("div",{className:"text-center p-8",children:(0,s.jsx)("p",{className:"text-lg",children:"Waiting for participants to join..."})}):(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4 text-center",children:["Participants (",t.length,")"]}),(0,s.jsx)("ul",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:t.map(e=>(0,s.jsxs)("li",{className:"\n              bg-white dark:bg-gray-800 \n              p-3 rounded-lg shadow-sm \n              flex items-center justify-between\n              border-l-4 ".concat(e.isWillingToLead?"border-blue-500":"border-gray-300","\n              ").concat(l.includes(e.id)&&!e.groupId?"animate-fadeIn":"","\n              ").concat(e.groupId?"opacity-70":"opacity-100","\n            "),children:[(0,s.jsx)("span",{className:"font-medium truncate",children:e.name}),e.isWillingToLead&&(0,s.jsx)("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"Leader"})]},e.id))})]})}function d(e){let{onAddParticipant:t}=e,[l,a]=(0,r.useState)(""),[n,i]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add Participant Manually"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.trim()&&(t(l.trim(),n),a(""),i(!1))},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",id:"name",value:l,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter participant name",required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"isLeader",checked:n,onChange:e=>i(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"isLeader",className:"ml-2 block text-sm",children:"Willing to lead a group"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Add Participant"})]})]})}var o=l(5626),c=l(5863);function u(){let{roomId:e,participants:t,groups:l,isGroupsFormed:a,addParticipantManually:u,formGroups:m,resetGroups:g,resetRoom:x}=(0,c.n)(),[h,p]=(0,r.useState)(!1),[b,f]=(0,r.useState)("");return(0,r.useEffect)(()=>{f("".concat(window.location.origin,"/join/sunday-group"))},[]),(0,s.jsxs)("div",{className:"min-h-screen p-6",children:[(0,s.jsxs)("header",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Sunday Group Formation"}),(0,s.jsx)("p",{className:"text-lg",children:"Host Page"})]}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Join this Room"}),(0,s.jsx)("p",{className:"mb-4",children:"Scan the QR code or share this link:"}),(0,s.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-md mb-4",children:(0,s.jsx)("code",{className:"text-sm break-all",children:b})})]}),(0,s.jsx)(n,{value:b})]}),(0,s.jsx)("div",{children:(0,s.jsx)(d,{onAddParticipant:u})})]}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(i,{participants:t})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[(0,s.jsx)("button",{onClick:()=>{m()||(p(!0),setTimeout(()=>p(!1),3e3))},disabled:t.length<4||a,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Form Groups"}),a&&(0,s.jsx)("button",{onClick:g,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-medium py-2 px-6 rounded-md",children:"Reset Groups"}),(0,s.jsx)("button",{onClick:x,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-6 rounded-md",children:"Reset Room"})]}),h&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 text-center",children:"Not enough willing leaders to form groups. Each group needs at least one leader."}),a&&l&&(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(o.A,{groups:l})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[857,441,684,358],()=>t(3871)),_N_E=e.O()}]);