(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{6:(e,t,r)=>{Promise.resolve().then(r.bind(r,4669))},4669:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(5155),o=r(2115),n=r(8999),s=r(5863);function i(e){let{roomId:t}=e,r=(0,n.useRouter)(),{addParticipant:i}=(0,s.n)(),[l,u]=(0,o.useState)(""),[c,d]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),[g,p]=(0,o.useState)("");return(0,a.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Join Sunday Group"}),g&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 text-center",children:g}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!l.trim())return void p("Please enter your name");m(!0);try{let e=i(l.trim(),c);r.push("/participant/".concat(t,"/").concat(e.id))}catch(e){p("Failed to join the room. Please try again."),m(!1)}},className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"Your Name"}),(0,a.jsx)("input",{type:"text",id:"name",value:l,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your name",required:!0,disabled:h})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isLeader",checked:c,onChange:e=>d(e.target.checked),className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:h}),(0,a.jsx)("label",{htmlFor:"isLeader",className:"ml-3 block text-sm",children:"I am willing to lead a group"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",disabled:h,children:h?"Joining...":"Join Group"})]})]})})}},5863:(e,t,r)=>{"use strict";r.d(t,{RoomProvider:()=>u,n:()=>c});var a=r(5155),o=r(2115);let n=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"];function s(){return Math.random().toString(36).substring(2,9)}let i=(0,o.createContext)(void 0),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return t;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse JSON from localStorage:",e),t}};function u(e){let{children:t}=e,[r,u]=(0,o.useState)(()=>localStorage.getItem("roomId")||s()),[c,d]=(0,o.useState)(()=>l(localStorage.getItem("participants"),[])),[h,m]=(0,o.useState)(()=>l(localStorage.getItem("groups"),null)),[g,p]=(0,o.useState)(()=>"true"===localStorage.getItem("isGroupsFormed"));(0,o.useEffect)(()=>{localStorage.setItem("roomId",r),localStorage.setItem("participants",JSON.stringify(c)),localStorage.setItem("groups",h?JSON.stringify(h):""),localStorage.setItem("isGroupsFormed",g.toString())},[r,c,h,g]);let f=(e,t)=>{let r={id:s(),name:e,isWillingToLead:t};return d(e=>[...e,r]),r};return(0,a.jsx)(i.Provider,{value:{roomId:r,participants:c,groups:h,isGroupsFormed:g,addParticipant:f,addParticipantManually:(e,t)=>{f(e,t)},removeParticipant:e=>{d(t=>t.filter(t=>t.id!==e))},formGroups:()=>{let e=function(e){if(0===e.length)return[];let t=e.filter(e=>e.isWillingToLead),r=e.length,a=Math.floor(r/4),o=Math.ceil(r/6);if(t.length<o)return null;let i=Math.min(a,t.length);i=Math.max(i,o);let l=[...e].sort(()=>Math.random()-.5),u=l.filter(e=>e.isWillingToLead),c=l.filter(e=>!e.isWillingToLead),d=[];for(let e=0;e<i;e++)e<u.length&&d.push({id:s(),name:n[Math.floor(Math.random()*n.length)],participants:[u[e]],hasLeader:!0});for(let e=i;e<u.length;e++)d[e%i].participants.push(u[e]);for(let e=0;e<c.length;e++){let t=d.map((e,t)=>({index:t,count:e.participants.length})).sort((e,t)=>e.count-t.count)[0].index;d[t].participants.push(c[e])}return d.forEach(e=>{e.participants.forEach(t=>{t.groupId=e.id})}),d}(c);return null!==e&&(m(e),p(!0),!0)},resetGroups:()=>{m(null),p(!1),d(e=>e.map(e=>({...e,groupId:void 0})))},resetRoom:()=>{u(s()),d([]),m(null),p(!1)}},children:t})}function c(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useRoom must be used within a RoomProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(6)),_N_E=e.O()}]);