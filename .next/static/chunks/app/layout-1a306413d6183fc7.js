(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{5271:(t,e,r)=>{Promise.resolve().then(r.bind(r,5863)),Promise.resolve().then(r.t.bind(r,5688,23)),Promise.resolve().then(r.t.bind(r,9432,23)),Promise.resolve().then(r.t.bind(r,9324,23))},5688:t=>{t.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},5863:(t,e,r)=>{"use strict";r.d(e,{RoomProvider:()=>i,n:()=>s});var o=r(5155),a=r(2115);let l=(0,a.createContext)(void 0),n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return e;try{return JSON.parse(t)}catch(t){return console.error("Failed to parse JSON from localStorage:",t),e}};function i(t){let{children:e}=t,[r]=(0,a.useState)("sunday-group"),[i,s]=(0,a.useState)(()=>n(localStorage.getItem("participants"),[])),[u,c]=(0,a.useState)(()=>n(localStorage.getItem("groups"),null)),[p,d]=(0,a.useState)(()=>"true"===localStorage.getItem("isGroupsFormed"));(0,a.useEffect)(()=>{localStorage.setItem("roomId",r),localStorage.setItem("participants",JSON.stringify(i)),localStorage.setItem("groups",u?JSON.stringify(u):""),localStorage.setItem("isGroupsFormed",p.toString())},[r,i,u,p]);let m=(t,e)=>{let r={id:Math.random().toString(36).substring(2,9),name:t,isWillingToLead:e};return s(t=>[...t,r]),r};return(0,o.jsx)(l.Provider,{value:{roomId:r,participants:i,groups:u,isGroupsFormed:p,addParticipant:m,addParticipantManually:(t,e)=>{m(t,e)},removeParticipant:t=>{s(e=>e.filter(e=>e.id!==t))},formGroups:()=>{let t=function(t){if(0===t.length)return[];let e=t.filter(t=>t.isWillingToLead),r=t.length,o=Math.floor(r/4),a=Math.ceil(r/6);if(e.length<a)return null;let l=Math.min(o,e.length);l=Math.max(l,a);let n=[...t].sort(()=>Math.random()-.5),i=n.filter(t=>t.isWillingToLead),s=n.filter(t=>!t.isWillingToLead),u=[];for(let t=0;t<l;t++)t<i.length&&u.push({id:"group-".concat(t+1),name:"Group ".concat(t+1),participants:[i[t]],hasLeader:!0});for(let t=l;t<i.length;t++)u[t%l].participants.push(i[t]);for(let t=0;t<s.length;t++){let e=u.map((t,e)=>({index:e,count:t.participants.length})).sort((t,e)=>t.count-e.count)[0].index;u[e].participants.push(s[t])}return u.forEach(t=>{t.participants.forEach(e=>{e.groupId=t.id})}),u}(i);return null!==t&&(c(t),d(!0),!0)},resetGroups:()=>{c(null),d(!1),s(t=>t.map(t=>({...t,groupId:void 0})))},resetRoom:()=>{s([]),c(null),d(!1)}},children:e})}function s(){let t=(0,a.useContext)(l);if(void 0===t)throw Error("useRoom must be used within a RoomProvider");return t}},9324:()=>{},9432:t=>{t.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}}},t=>{var e=e=>t(t.s=e);t.O(0,[261,441,684,358],()=>e(5271)),_N_E=t.O()}]);