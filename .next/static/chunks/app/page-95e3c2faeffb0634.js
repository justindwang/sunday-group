(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3871:(e,t,s)=>{Promise.resolve().then(s.bind(s,7571))},5626:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155);function l(e){let{groups:t,highlightGroupId:s}=e;return t&&0!==t.length?(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-center",children:"Groups"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"\n              bg-white dark:bg-gray-800 \n              rounded-lg shadow-md overflow-hidden\n              border-t-4 border-blue-500\n              ".concat(s===e.id?"ring-2 ring-blue-500 ring-offset-2":"","\n            "),children:[(0,a.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900",children:(0,a.jsx)("h3",{className:"text-xl font-bold text-center",children:e.name})}),(0,a.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.participants.map(e=>(0,a.jsxs)("li",{className:"\n                    p-4 flex items-center justify-between\n                    ".concat(e.isWillingToLead?"bg-blue-50 dark:bg-blue-900/30":"","\n                  "),children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),e.isWillingToLead&&(0,a.jsx)("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"Leader"})]},e.id))})]},e.id))})]}):(0,a.jsx)("div",{className:"text-center p-8",children:(0,a.jsx)("p",{className:"text-lg",children:"No groups have been formed yet."})})}s(2115)},5863:(e,t,s)=>{"use strict";s.d(t,{RoomProvider:()=>d,n:()=>c});var a=s(5155),l=s(2115);let r=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"];function n(){return Math.random().toString(36).substring(2,9)}let i=(0,l.createContext)(void 0),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return t;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse JSON from localStorage:",e),t}};function d(e){let{children:t}=e,[s,d]=(0,l.useState)(()=>localStorage.getItem("roomId")||n()),[c,m]=(0,l.useState)(()=>o(localStorage.getItem("participants"),[])),[u,h]=(0,l.useState)(()=>o(localStorage.getItem("groups"),null)),[g,x]=(0,l.useState)(()=>"true"===localStorage.getItem("isGroupsFormed"));(0,l.useEffect)(()=>{localStorage.setItem("roomId",s),localStorage.setItem("participants",JSON.stringify(c)),localStorage.setItem("groups",u?JSON.stringify(u):""),localStorage.setItem("isGroupsFormed",g.toString())},[s,c,u,g]);let p=(e,t)=>{let s={id:n(),name:e,isWillingToLead:t};return m(e=>[...e,s]),s};return(0,a.jsx)(i.Provider,{value:{roomId:s,participants:c,groups:u,isGroupsFormed:g,addParticipant:p,addParticipantManually:(e,t)=>{p(e,t)},removeParticipant:e=>{m(t=>t.filter(t=>t.id!==e))},formGroups:()=>{let e=function(e){if(0===e.length)return[];let t=e.filter(e=>e.isWillingToLead),s=e.length,a=Math.floor(s/4),l=Math.ceil(s/6);if(t.length<l)return null;let i=Math.min(a,t.length);i=Math.max(i,l);let o=[...e].sort(()=>Math.random()-.5),d=o.filter(e=>e.isWillingToLead),c=o.filter(e=>!e.isWillingToLead),m=[];for(let e=0;e<i;e++)e<d.length&&m.push({id:n(),name:r[Math.floor(Math.random()*r.length)],participants:[d[e]],hasLeader:!0});for(let e=i;e<d.length;e++)m[e%i].participants.push(d[e]);for(let e=0;e<c.length;e++){let t=m.map((e,t)=>({index:t,count:e.participants.length})).sort((e,t)=>e.count-t.count)[0].index;m[t].participants.push(c[e])}return m.forEach(e=>{e.participants.forEach(t=>{t.groupId=e.id})}),m}(c);return null!==e&&(h(e),x(!0),!0)},resetGroups:()=>{h(null),x(!1),m(e=>e.map(e=>({...e,groupId:void 0})))},resetRoom:()=>{d(n()),m([]),h(null),x(!1)}},children:t})}function c(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useRoom must be used within a RoomProvider");return e}},7571:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(5155),l=s(2115),r=s(1857);function n(e){let{value:t,size:s=256}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:(0,a.jsx)(r.h,{value:t,size:s,bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!1})}),(0,a.jsx)("p",{className:"mt-4 text-center text-sm",children:"Scan to join the group"})]})}function i(e){let{participants:t}=e,[s,r]=(0,l.useState)([]);return((0,l.useEffect)(()=>{let e=t.map(e=>e.id),a=t.filter(e=>!s.includes(e.id));a.length>0?r(e=>[...e,...a.map(e=>e.id)]):e.length<s.length&&r(t=>t.filter(t=>e.includes(t)))},[t,s]),0===t.length)?(0,a.jsx)("div",{className:"text-center p-8",children:(0,a.jsx)("p",{className:"text-lg",children:"Waiting for participants to join..."})}):(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 text-center",children:["Participants (",t.length,")"]}),(0,a.jsx)("ul",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:t.map(e=>(0,a.jsxs)("li",{className:"\n              bg-white dark:bg-gray-800 \n              p-3 rounded-lg shadow-sm \n              flex items-center justify-between\n              border-l-4 ".concat(e.isWillingToLead?"border-blue-500":"border-gray-300","\n              ").concat(s.includes(e.id)&&!e.groupId?"animate-fadeIn":"","\n              ").concat(e.groupId?"opacity-70":"opacity-100","\n            "),children:[(0,a.jsx)("span",{className:"font-medium truncate",children:e.name}),e.isWillingToLead&&(0,a.jsx)("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"Leader"})]},e.id))})]})}function o(e){let{onAddParticipant:t}=e,[s,r]=(0,l.useState)(""),[n,i]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add Participant Manually"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&(t(s.trim(),n),r(""),i(!1))},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",id:"name",value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter participant name",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isLeader",checked:n,onChange:e=>i(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"isLeader",className:"ml-2 block text-sm",children:"Willing to lead a group"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Add Participant"})]})]})}var d=s(5626),c=s(5863);function m(){let{roomId:e,participants:t,groups:s,isGroupsFormed:r,addParticipantManually:m,formGroups:u,resetGroups:h,resetRoom:g}=(0,c.n)(),[x,p]=(0,l.useState)(!1),[b,f]=(0,l.useState)("");return(0,l.useEffect)(()=>{f("".concat(window.location.origin,"/join/").concat(e))},[e]),(0,a.jsxs)("div",{className:"min-h-screen p-6",children:[(0,a.jsxs)("header",{className:"mb-8 text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Sunday Group Formation"}),(0,a.jsx)("p",{className:"text-lg",children:"Host Page"})]}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Join this Room"}),(0,a.jsx)("p",{className:"mb-4",children:"Scan the QR code or share this link:"}),(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-md mb-4",children:(0,a.jsx)("code",{className:"text-sm break-all",children:b})})]}),(0,a.jsx)(n,{value:b})]}),(0,a.jsx)("div",{children:(0,a.jsx)(o,{onAddParticipant:m})})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(i,{participants:t})}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[(0,a.jsx)("button",{onClick:()=>{u()||(p(!0),setTimeout(()=>p(!1),3e3))},disabled:t.length<4||r,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Form Groups"}),r&&(0,a.jsx)("button",{onClick:h,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-medium py-2 px-6 rounded-md",children:"Reset Groups"}),(0,a.jsx)("button",{onClick:g,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-6 rounded-md",children:"Reset Room"})]}),x&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6 text-center",children:"Not enough willing leaders to form groups. Each group needs at least one leader."}),r&&s&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(d.A,{groups:s})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[857,441,684,358],()=>t(3871)),_N_E=e.O()}]);